## This YAML file contains MLCube configuration.
## The gandlf_deployMetrics tool looks for this file to generate your metrics calculation MLCube image.
## If you are an author, this file (or the derivative generated by gandlf_deployMetrics)
## can be distributed along with your container to enable use as an MLCube.
## See the MLCube specifications (ex: https://mlcommons.github.io/mlcube/runners/) for additional options.


# Metadata. If you are an author, change this to reflect your organization and metrics specifics.
name: MLCommons GaNDLF BraTS2023 Seg. Metrics
description: Contains functionality for calculating BraTS2023 segmentation metrics.
authors: 
 - {name: "MLCommons Medical Working Group", email: "gandlf@mlcommons.org", org: "MLCommons" }

## Specifies hardware and software requirements.
platform:
  accelerator_count: 0
  # Some other sample platform requirement parameters
  #  host_memory_gb: 40
  #  need_internet_access: True
  #  host_disk_space_gb: 100

docker:
  # The image tag that will be built/pulled/used. Change to suit your organization/model:version.
  image: mlcommons/brats2023-segmentation-metrics:0.0.0
  
  ## Generally, these build options will only be needed by GaNDLF maintainers.
  # Docker build context relative to $MLCUBE_ROOT. (gandlf_deploy can handle this automatically.)
  build_context: "../"
  # Docker file name within docker build context. Any "Dockerfile-*" in the GaNDLF source repo is valid.
  build_file: "Dockerfile-CPU"

tasks:
  evaluate:
  # Runs metrics calculation on predictions
    entrypoint: "python3.8 /entrypoint.py"
    parameters:
      inputs: {
        predictions: predictions/,
        labels: labels/,
        parameters_file: {type: file, default: parameters.yaml}
      }
      outputs: { output_path: { type: "file", default: "results.yaml" } }
